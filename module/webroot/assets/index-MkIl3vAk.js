(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();let x=0;function A(n){return`${n}_callback_${Date.now()}_${x++}`}function P(n,a){return typeof a>"u"&&(a={}),new Promise((r,s)=>{const e=A("exec");window[e]=(c,l,y)=>{r({errno:c,stdout:l,stderr:y}),t(e)};function t(c){delete window[c]}try{ksu.exec(n,JSON.stringify(a),e)}catch(c){s(c),t(e)}})}function N(n){ksu.toast(n)}function O(n){const r=new DOMParser().parseFromString(n,"text/xml"),s={};return r.querySelectorAll("setting").forEach(t=>{const c=t.getAttribute("value"),l=t.getAttribute("package");s[l]={ssaid:c,packageName:l,defaultValue:t.getAttribute("defaultValue"),defaultSysSet:t.getAttribute("defaultSysSet")==="true",tag:t.getAttribute("tag")}}),s}async function u(n){const{errno:a,stdout:r,stderr:s}=await P(n);if(a!=0){N(`stderr: ${s}`);return}else return r}function T(n){let a="";const r="abcdef0123456789";for(let s=0;s<n;s++){const e=Math.floor(Math.random()*r.length);a+=r.charAt(e)}return a}function M(n,a){return Math.floor(Math.random()*(a-n)+n)}const f="/data/system/users/0/settings_ssaid.xml",I="/data/adb/modules/deviceidchanger/settings_ssaid.xml",C=await u(`cat ${f}`),g=O(C.toString());console.log("Parsed settings:",g);const m=document.querySelector("body"),_=["/wallpapers/frutiger-aero-wallpapers-1.jpg","/wallpapers/frutiger-aero-wallpapers-2.jpg","/wallpapers/frutiger-aero-wallpapers-3.jpg","/wallpapers/frutiger-aero-wallpapers-4.jpg","/wallpapers/frutiger-aero-wallpapers-5.jpg"],L=_[M(0,_.length)];console.log(`Background image set to: ${L}`);m.style.backgroundImage=`url('${L}')`;m.style.backgroundRepeat="no-repeat";m.style.backgroundAttachment="fixed";m.style.backgroundSize="cover";m.style.backgroundPosition="center";var v=!1;async function j(){const n=document.getElementById("app-pkg");var a=document.getElementById("ssaid-value");const r=document.getElementById("balloon-text"),s=document.getElementById("randomize-ssaid"),e=document.getElementById("apply-ssaid"),t=document.getElementById("default-ssaid"),c=document.getElementById("about-window"),l=document.getElementById("open-about"),y=document.getElementById("close-about"),p=document.getElementById("dialog-div"),E=document.getElementById("dialog-msg"),B=document.getElementById("dialog-close1"),b=document.getElementById("dialog-close2"),S=document.getElementById("backup-settings"),h=document.getElementById("donate-window"),$=document.getElementById("open-donate"),k=document.getElementById("close-donate");var w="";for(const[o,{ssaid:d}]of Object.entries(g)){const i=document.createElement("option");i.value=d,i.textContent=o,o!=="android"&&n.appendChild(i)}n.addEventListener("click",o=>{o.preventDefault()}),n.addEventListener("change",o=>{var d=o.target.value,i=o.target.options[o.target.selectedIndex].textContent;console.log(i,": ",d),a.value=d,w=i}),s.addEventListener("click",()=>{a.value=T(16)}),t.addEventListener("click",()=>{a.value=g[w].defaultValue}),e.addEventListener("click",async()=>{var o=a.value,d=n.options[n.selectedIndex].textContent;o.match(/^[0-9a-f]+$/i)&&o.length==16?(console.log(`Applying SSAID: ${o} for package: ${d}`),await u(`sed -i 's/value="${g[d].ssaid}"/value="${o}"/' ${f}`),await u(`chmod 600 ${f}`),g[d].ssaid=o,E.innerHTML=`SSAID for <b>${d}</b> changed to <b>${o}</b>`,b.innerHTML="Reboot",v=!0,p.hidden=!1):(r.hidden=!1,setTimeout(()=>{r.hidden=!0},5e3))}),S.addEventListener("click",async()=>{await u(`cp ${f} ${I}`),E.innerHTML=`Backup created at <b>${I}</b>`,b.innerHTML="Close",v=!1,p.hidden=!1}),l.addEventListener("click",()=>{c.hidden=!1}),y.addEventListener("click",()=>{setTimeout(()=>{c.hidden=!0},100)}),B.addEventListener("click",()=>{setTimeout(()=>{p.hidden=!0},100)}),b.addEventListener("click",()=>{setTimeout(async()=>{v&&await u("reboot"),p.hidden=!0},100)}),$.addEventListener("click",()=>{h.hidden=!1}),k.addEventListener("click",()=>{setTimeout(()=>{h.hidden=!0},100)}),k.addEventListener("click",()=>{setTimeout(()=>{h.hidden=!0},100)})}j();
