(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function d(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=d(e);fetch(e.href,t)}})();let M=0;function N(a){return`${a}_callback_${Date.now()}_${M++}`}function O(a,n){return typeof n>"u"&&(n={}),new Promise((d,s)=>{const e=N("exec");window[e]=(c,u,h)=>{d({errno:c,stdout:u,stderr:h}),t(e)};function t(c){delete window[c]}try{ksu.exec(a,JSON.stringify(n),e)}catch(c){s(c),t(e)}})}function T(a){ksu.toast(a)}function C(a){const d=new DOMParser().parseFromString(a,"text/xml"),s={};return d.querySelectorAll("setting").forEach(t=>{const c=t.getAttribute("value"),u=t.getAttribute("package");s[u]={ssaid:c,packageName:u,defaultValue:t.getAttribute("defaultValue"),defaultSysSet:t.getAttribute("defaultSysSet")==="true",tag:t.getAttribute("tag")}}),s}async function r(a){const{errno:n,stdout:d,stderr:s}=await O(a);if(n!=0){T(`stderr: ${s}`);return}else return d}function D(a){let n="";const d="abcdef0123456789";for(let s=0;s<a;s++){const e=Math.floor(Math.random()*d.length);n+=d.charAt(e)}return n}function j(a,n){return Math.floor(Math.random()*(n-a)+a)}const p=document.querySelector("body"),_=["/wallpapers/frutiger-aero-wallpapers-1.jpg","/wallpapers/frutiger-aero-wallpapers-2.jpg","/wallpapers/frutiger-aero-wallpapers-3.jpg","/wallpapers/frutiger-aero-wallpapers-4.jpg","/wallpapers/frutiger-aero-wallpapers-5.jpg"],S=_[j(0,_.length)];console.log(`Background image set to: ${S}`);p.style.backgroundImage=`url('${S}')`;p.style.backgroundRepeat="no-repeat";p.style.backgroundAttachment="fixed";p.style.backgroundSize="cover";p.style.backgroundPosition="center";const q="/data/adb/modules/deviceidchanger",i="/data/system/users/0/settings_ssaid.xml",f=`${q}/tmp/settings_ssaid.xml`,x="/sdcard/settings_ssaid.xml";await r("uname -m");const L=await r(`file ${i}`);console.log(`SSAID file check result: ${L}`);const b=!!L.includes("ASCII text");console.log(`Is SSAID file ABX: ${b}`);const H=b?await r(`cat ${i}`):await r(`abx2xml ${i} ${f}; cat ${f}`);console.log(`XML data loaded from: ${b?i:f}`);const m=C(H.toString());console.log("Parsed settings:",m);var k=!1;async function X(){const a=document.getElementById("app-pkg");var n=document.getElementById("ssaid-value");const d=document.getElementById("balloon-text"),s=document.getElementById("randomize-ssaid"),e=document.getElementById("apply-ssaid"),t=document.getElementById("default-ssaid"),c=document.getElementById("about-window"),u=document.getElementById("open-about"),h=document.getElementById("close-about"),y=document.getElementById("dialog-div"),E=document.getElementById("dialog-msg"),B=document.getElementById("dialog-close1"),v=document.getElementById("dialog-close2"),A=document.getElementById("backup-settings"),w=document.getElementById("donate-window"),P=document.getElementById("open-donate"),$=document.getElementById("close-donate");var I="";for(const[o,{ssaid:l}]of Object.entries(m)){const g=document.createElement("option");g.value=l,g.textContent=o,o!=="android"&&a.appendChild(g)}a.addEventListener("click",o=>{o.preventDefault()}),a.addEventListener("change",o=>{var l=o.target.value,g=o.target.options[o.target.selectedIndex].textContent;console.log(g,": ",l),n.value=l,I=g}),s.addEventListener("click",()=>{n.value=D(16)}),t.addEventListener("click",()=>{n.value=m[I].defaultValue}),e.addEventListener("click",async()=>{var o=n.value,l=a.options[a.selectedIndex].textContent;o.match(/^[0-9a-f]+$/i)&&o.length==16?(console.log(`Applying SSAID: ${o} for package: ${l}`),b?await r(`sed -i 's/value="${m[l].ssaid}"/value="${o}"/' ${i}`):(await r(`sed -i 's/value="${m[l].ssaid}"/value="${o}"/' ${f}`),await r(`xml2abx ${f} ${i}`)),await r(`chmod 600 ${i}`),m[l].ssaid=o,E.innerHTML=`SSAID for <b>${l}</b> changed to <b>${o}</b>`,v.innerHTML="Reboot",k=!0,y.hidden=!1):(d.hidden=!1,setTimeout(()=>{d.hidden=!0},5e3))}),A.addEventListener("click",async()=>{await r(`cp ${i} ${x}`),E.innerHTML=`Backup created at <b>${x}</b>`,v.innerHTML="Close",k=!1,y.hidden=!1}),u.addEventListener("click",()=>{c.hidden=!1}),h.addEventListener("click",()=>{setTimeout(()=>{c.hidden=!0},100)}),B.addEventListener("click",()=>{setTimeout(()=>{y.hidden=!0},100)}),v.addEventListener("click",()=>{setTimeout(async()=>{k&&await r("reboot"),y.hidden=!0},100)}),P.addEventListener("click",()=>{w.hidden=!1}),$.addEventListener("click",()=>{setTimeout(()=>{w.hidden=!0},100)}),$.addEventListener("click",()=>{setTimeout(()=>{w.hidden=!0},100)})}X();
